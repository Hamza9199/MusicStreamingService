<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MusicStreamingService.Behaviors"
             x:Class="MusicStreamingService.Views.AudioPlayer"
             BackgroundColor="Black">
    <VerticalStackLayout Spacing="20" Padding="10,0,10,0" HorizontalOptions="Center">

        <Image Source="{Binding CurrentSong.putanjaSlika}"
               WidthRequest="300"
               HeightRequest="280"
               Aspect="AspectFill"
               VerticalOptions="Center" />

        <VerticalStackLayout VerticalOptions="Center"  HorizontalOptions="Center">
            <Label Text="{Binding CurrentSong.naziv}"
                   FontSize="25"
                   FontAttributes="Bold"
                   TextColor="Gray"
                   Margin="0,5,0,0" />
            
        </VerticalStackLayout>

        <HorizontalStackLayout VerticalOptions="Center" HorizontalOptions="Center">
            <Label Text="{Binding CurrentSong.opis}"
               FontSize="23"
               TextColor="Gray"
               HorizontalOptions="Start"
                />
           
        </HorizontalStackLayout>
        <HorizontalStackLayout Margin="0,0,10,0">
            <ImageButton
                Source="Images/dotnet_bot.png"
                Clicked="DownloadSong"
                WidthRequest="30"
                HeightRequest="30"
                HorizontalOptions="Start"
                Margin="10,0,10,0"
                />
            <Button HorizontalOptions="End"
            Text="Like"
            Command="{Binding Like}"
            />
        </HorizontalStackLayout>

        <Label Text="{Binding CurrentTime}" 
               FontSize="18" 
               TextColor="White" 
               HorizontalTextAlignment="Center"
               Margin="0,-3,0,-15"
               />
        <Slider Minimum="0" Maximum="{Binding SongDuration}" 
                Value="{Binding CurrentPosition, Mode=TwoWay}"
                ValueChanged="Slider_ValueChanged"
                DragStarted="Slider_DragStarted"
                DragCompleted="Slider_DragCompleted"
                >
            
        </Slider>


        <StackLayout Orientation="Horizontal" HorizontalOptions="Start" Margin="0,-12,0,0">
            <Label Text="🔊" Margin="10,0,-10,0"/>
            <Slider Minimum="0" Maximum="1" WidthRequest="130" 
                Value="{Binding Volume}" />
        </StackLayout>
        
        <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="30" Margin="0,-20,0,0">
            
            <Button Text="-5s  ⏪" Command="{Binding RewindCommand}" BackgroundColor="Transparent" TextColor="Gray" Margin="0,0,-30,0" />
            <Button Text="{Binding PlayPauseButtonText}"
                    BackgroundColor="Transparent"
                    Command="{Binding PlayPauseCommand}"
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    WidthRequest="80"
                    HeightRequest="80" />
            <Button Text="⏩  +5s" Command="{Binding ForwardCommand}" BackgroundColor="Transparent" TextColor="Gray" Margin="-30,0,0,0" />
            
        </StackLayout>

        

    </VerticalStackLayout>
</ContentPage>
